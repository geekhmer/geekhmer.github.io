
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>GeeKhmer</title>
  <meta name="author" content="Bunlong Van">
  
  
  <meta name="description" content="The biggest website of computer programming, Ruby, Ruby on Rails, Erlang, Chicagoboss and Javascript in Southeast Asia.">

  <meta name="keywords" content="geekhmer,khmer,cambodia,geek khmer,khmer geek,geek cambodia,cambodia geek,hacker,khmer hacker,hacker khmer,hacking,coding,programming,testing,Ruby,Ruby khmer,khmer Ruby,Rubyist,khmer Rubyist,Rubyist khmer,Rubyist cambodia,cambodia Rubyist,Ruby on Rails,Ruby on Rails khmer,khmer Ruby on Rails,Cambodia Ruby,Ruby Cambodia,Cambodia Ruby on Rails,Ruby on Rails Cambodia,RSpec TDD,RSpec BDD,facebook,computer general,networking,Chicagoboss,erlang,Erlang,Khmer Chicagoboss, Chicagoboss Khmer,Cambodia Chicagoboss,Chicagoboss Cambodia,Khmer Erlang,Erlang Khmer,Cambodia Erlang, Erlang Cambodia, Ruby southeast asia, Ruby on Rails southeast asia">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://geekhmer.github.io/blog/page/8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="" rel="alternate" title="GeeKhmer" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<link href="/stylesheets/jquery.fancybox.css" media="screen, projection" rel="stylesheet" type="text/css">
<script src="/javascripts/libs/jquery.fancybox.pack.js"></script>
<script src="/javascripts/init_fancybox.js"></script>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1>
    <!-- <a href="/">GeeKhmer</a> -->
    <div class="logo" />
  </h1>
  
</hgroup>

</header>
  <nav role="navigation">
  <form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:geekhmer.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
  </form>

<ul class="subscription" data-subscription="rss">
  
  
</ul>
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Articles</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/team">Team</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/31/rails-5-timestamps-will-be-changed/">Rails 5 Timestamps Will Be Changed</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-31T19:52:00+07:00" pubdate data-updated="true">Mar 31<span>st</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/ruby_on_rails.png" width="400" alt="Rails 5 timestamps will be changed" />
</p>




<p>
  If you are running Rails 4.2, you will notice the generated migration add a default option to timestamps:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">CreateFoods</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Migration</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">change</span>
</span><span class='line'>    <span class="n">create_table</span> <span class="ss">:products</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">t</span><span class="o">.</span><span class="n">timestamps</span> <span class="ss">null</span><span class="p">:</span> <span class="kp">false</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  Without the <code>null: false</code> it will emit a warning:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="s1">&#39;#timestamp&#39;</span> <span class="n">was</span> <span class="n">called</span> <span class="n">without</span> <span class="n">specifying</span> <span class="n">an</span> <span class="n">option</span> <span class="k">for</span> <span class="sb">`null`</span><span class="o">.</span> <span class="no">In</span> <span class="no">Rails</span> <span class="mi">5</span><span class="p">,</span> <span class="n">this</span> <span class="n">behavior</span> <span class="n">will</span>
</span><span class='line'> <span class="n">change</span> <span class="n">to</span> <span class="sb">`null: false`</span><span class="o">.</span> <span class="no">You</span> <span class="n">should</span> <span class="n">manually</span> <span class="n">specify</span> <span class="s1">&#39;null: true&#39;</span> <span class="n">to</span> <span class="n">prevent</span> <span class="n">the</span> <span class="n">behavior</span> <span class="n">of</span>
</span><span class='line'> <span class="n">your</span> <span class="n">existing</span> <span class="n">migrations</span> <span class="n">from</span> <span class="n">changing</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  This null option is:
</p>




<p>
  :null - allows or disallows NULL values in the column. This option could have been named :null_allowed.
</p>




<p>
  <code>null: false</code> means you cannot give NULL values for created_at and updated_at on Rails 5.
</p>




<p>
  So far so good, That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/29/where-should-i-put-my-code-in-ruby-on-rails-application/">Where Should I Put My Code in Ruby on Rails Application?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-29T09:44:00+07:00" pubdate data-updated="true">Mar 29<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/ruby_on_rails.png" width="400" alt="Ruby on Rails Nested Form Fields" />
</p>




<p>
  Sometimes you’re sure that’s not the right place for that piece of code, but where does it go? &#8220;Refactor&#8221; is only a good answer if you know how to fix it.
</p>




<p>
  In a Rails application, and what kind of code goes where?
</p>




<p>
  <strong>Models</strong><br/>
  For code about your database or domain objects, the model is your first step in Rails. Models are powerful, easy to test, reusable across applications and more like non-Rails code than most of Rails — familiar, even if you don’t know Rails yet.<br/>
</p>




<p>
  If there’s a good way to put the code in your model, that’s usually a safe bet and a good idea.
</p>




<p>
  Write tests too, of course!
</p>




<p>
  <strong>Controllers</strong><br/>
  It’s easy to put lots of code in your controllers, but it’s almost always a mistake. Business logic for your app should get out of the controller and into the model as quickly as possible. Logic about how things are shown to the user should go into the view. In general, the controller should be a tiny, thin glue layer putting together your other components.
</p>




<p>
  <strong>Views</strong><br/>
  Having lots of logic in your views is a huge anti-pattern. Don’t do it. It’s hard to test, it’s hard to find, it’s hard to write sandwiched in between the HTML… Just don’t.
</p>




<p>
  Instead, your views should contain HTML, variables that turn into HTML, and calls to helper methods that generate HTML — or whatever your final output format is. There should be no logic in there to test. No conditionals, no loops, no non-display methods. If you add an output format, there should be no code to repeat because all the interesting data transforms already happened, and no other output format cares about your HTML-only helpers. Right?
</p>




<p>
  <strong>Helpers</strong><br/>
  Rails &#8220;helpers&#8221; are very specifically view helpers. They’re automatically included in views, but not in controllers or models. That’s on purpose.
</p>




<p>
  Code in the application helper is included in all the views in your application. Code in other helpers is included in the corresponding view. If you find yourself writing big loops, method calls or other logic in the view but it’s clearly display logic, move it into a method in the helper.
</p>




<p>
  <strong>Lib Directory</strong><br/>
  Every Rails app starts with a /lib directory, but not much explanation of it.
</p>




<p>
  Remember that helpers are specifically view helpers? What if you wanted a controller helper? Or a model helper? Sometimes you can use a parent controller or parent model, but that’s not always the best choice.
</p>




<p>
  If you want to write a helper module for non-view logic, the /lib directory is usually the best place to put it. For example, logging code or some kinds of error handling may be a cross-cutting concern like that.
</p>




<p>
  Also, if you’re putting everything in the ApplicationController or ApplicationHelper, those can get big. Consider factoring some of that code out into helpers, or into /lib.
</p>




<p>
  Stuff in /lib isn’t always automagically included for you like controllers and models. So you may need to explicitly require the file, not just use the name of the class. (<a href="http://geekhmer.github.io/blog/2014/04/24/autoload-all-files-in-lib-directory-ruby-on-rails/">Autoload All Files in Lib Directory Ruby on Rails</a>)
</p>




<p>
  <strong>Gems</strong><br/>
  Sometimes you have reusable pieces in your application. A controller or model might be needed by multiple different Rails apps. A particular piece of logic for logging or display might be useful to a lot of different folks. You might even find a different way of doing things that most Rails apps would benefit from.
</p>




<p>
  These are all cases where you want to create a new gem and have your applications use it instead of sharing a directory of code.
</p>




<p>
  These days it’s really easy to create a new gem, so don’t be intimidated. If you haven’t worked through the first free chapter of Rebuilding Rails, this may be a good time to do it — it’ll show you how to quickly, easily create and use a new gem.
</p>




<p>
  <strong>Assets</strong><br/>
  In a few cases, you’re not even writing Ruby code. Instead, it may be Sass, Scss, JavaScript or CoffeeScript. In this case, it generally belongs under app/assets.
</p>




<p>
  <strong>Concerns and Exceptions</strong><br/>
  Rails has a very specific, very unusual setup. I think it’s a good idea for small apps, but only use Rails until it hurts. If your application gets too big or complicated, the Rails code organization may hurt more than it helps you.
</p>




<p>
  There are several &#8220;grow out of Rails&#8221; approaches to apply alternate architectures to the framework. From Hexagonal Rails to Objects on Rails to the more general Clean Ruby DCI approach. I won’t tell you which to use, but I’ll tell you that you’re better off starting with plain, simple Rails and growing out of it.
</p>




<p>
  Most Rails apps, and even more Rails controllers, don’t need to get all that big. They often don’t need to change much. Why go complicated when simple is working great?
</p>




<p>
  So far so good, That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/23/ruby-on-rails-nested-form-fields/">Ruby on Rails Nested Form Fields</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-23T23:47:00+07:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/ruby_on_rails.png" width="400" alt="Ruby on Rails Nested Form Fields" />
</p>




<p>
  It’s super common to want to edit records along with their has_many associations on a single page.
</p>




<p>
  This Rails gem helps creating forms for models with nested has_many associations and relies on jQuery to dynamically add and remove nested form fields without a page reload.<br/>
  - Works for arbitrarily deeply nested associations (tested up to 4 levels).<br/>
  - Works with form builders like simple_form.<br/>
  - Requires at least Ruby 1.9 and the Rails asset pipeline.
</p>




<p>
  To install, add nested_form_fields to your application’s Gemfile:
</p>




<figure class='code'><figcaption><span>Gemfile </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="s1">&#39;nested_form_fields&#39;</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  Run bundle intall to install the gem:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">bundle</span> <span class="n">install</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  In application.js file add:
</p>




<figure class='code'><figcaption><span>application.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="sr">//</span><span class="o">=</span> <span class="nb">require</span> <span class="n">nested_form_fields</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  assuming that you have a User model with nested videos:
</p>




<figure class='code'><figcaption><span>user.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">has_many</span> <span class="ss">:videos</span>
</span><span class='line'>  <span class="n">accepts_nested_attributes_for</span> <span class="ss">:videos</span><span class="p">,</span> <span class="n">allow_destroy</span><span class="p">:</span> <span class="kp">true</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  Use the nested_fields_for helper inside your user form to add the video fields:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">=</span> <span class="n">form_for</span> <span class="vi">@user</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>  <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">nested_fields_for</span> <span class="ss">:videos</span> <span class="k">do</span> <span class="o">|</span><span class="n">ff</span><span class="o">|</span>
</span><span class='line'>    <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">text_field</span> <span class="ss">:video_title</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  Links to add and remove fields can be added using the add_nested_fields_link and remove_nested_fields_link helpers:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="o">=</span> <span class="n">form_for</span> <span class="vi">@user</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
</span><span class='line'>  <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">nested_fields_for</span> <span class="ss">:videos</span> <span class="k">do</span> <span class="o">|</span><span class="n">ff</span><span class="o">|</span>
</span><span class='line'>    <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">remove_nested_fields_link</span>
</span><span class='line'>    <span class="o">=</span> <span class="n">ff</span><span class="o">.</span><span class="n">text_field</span> <span class="ss">:video_title</span>
</span><span class='line'>  <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">add_nested_fields_link</span> <span class="ss">:videos</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  Note that remove_nested_fields_link needs to be called within the nested_fields_for call and add_nested_fields_link outside of it via the parent builder.
</p>




<p>
  So far so good, That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/22/ruby-hooks-for-metaprogramming/">Ruby Hooks for Metaprogramming</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-22T10:45:00+07:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/rights_and_wrongsof_ruby.jpg" width="400" alt="Ruby Hooks for Metaprogramming" />
</p>




<h3>
  Overview
</h3>




<p>
  <strong>What is a Hook?</strong><br/>
   In programming, a hook is a place and usually an interface provided in packaged code that allows a programmer to insert customized programming. For example, a programmer might want to provide code that analyzed how often a particular logic path was taken within a program.
</p>




<h3>
  Ruby Hooks
</h3>




<p>
  Ruby lets you hook in and change a lot of behavior of the core language. Methods, constants, classes, variables… etc. Ruby lets you query them all, and change a lot about them.
</p>




<p>
  Here’s summaries and links for all the hooks I could find:
</p>




<p>
  <strong>Methods</strong><br/>
  - <code>respond_to_missing?</code> - A way to make sure your dynamic methods defined with method_missing also handle respond_to?<br/>
  - <code>method_missing</code> - Called when a method cannot be found, potentially to allow dynamically defining one instead.<br/>
  - <code>method_added</code> - Called whenever a method is added which can be used to modify the method.<br/>
  - <code>method_removed</code> - Called whenever a method is removed.<br/>
  - <code>singleton_method_added</code> - Method added to the singleton class of the object, to be callable just on this one instance.<br/>
  - <code>singleton_method_removed</code> - Method removed from singleton class.<br/>
  - <code>method_undefined</code> - A method has been undefined, with undef_method. Undef_method is different from remove_method because remove_method may still allow superclasses to define the method – undef_method means it’s gone entirely.<br/>
  - <code>singleton_method_undefined</code> - Called when a singleton method is undefined entirely.<br/>
  - <code>initialize_copy</code> - An optional callback when cloning any Object.
</p>




<p>
  <strong>Classes</strong><br/>
  - <code>inherited</code> - A Ruby class is subclassed.
</p>




<p>
  <strong>Modules</strong><br/>
  - <code>append_features</code> - A Module is included, and its constants, methods and variables used.<br/>
  - <code>included</code> - A Module is included, which usually obsoletes &#8220;append_features&#8221;.<br/>
  - <code>extend_object</code> - A Module extends an Object.<br/>
  - <code>extended</code> - An Object is extended by a module, which mostly obsoletes extend_object.<br/>
  - <code>const_missing</code> - A constant isn’t already present.
</p>




<p>
  <strong>Marshalling</strong><br/>
  - <code>marshal_dump</code> - Called on an object to have it dump itself in Ruby Marshal format.<br/>
  - <code>marshal_load</code> - Called on an object to have it load itself in Ruby Mashal format.
</p>




<p>
  <strong>Coercion</strong><br/>
  - <code>coerce</code> - Called by the first type in a two-argument operator on the second argument, to make it turn into something the first argument can recognize.<br/>
  - <code>induced_from</code> - Deprecated, please don’t use.<br/>
  - <code>to_i</code>, <code>to_f</code>, <code>to_s</code>, <code>to_a</code>, <code>to_hash</code>, <code>to_proc</code> and others - Conversions, indicating that the object is being used as a type and should try to convert itself to that type.
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/21/ruby-on-rails-callback-classes/">Ruby on Rails Callback Classes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-21T14:51:00+07:00" pubdate data-updated="true">Mar 21<span>st</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/ruby_on_rails.png" width="400" alt="Ruby on Rails Callback Classes" />
</p>




<p>
  If you want to reuse callback code for more than one object that Rails provides a way to write callback classes. All you have to do is pass a given callback queue an object that responds to the name of the callback and takes the model object as a parameter.
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">MarkDeleted</span>
</span><span class='line'>  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">before_destroy</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</span><span class='line'>    <span class="n">model</span><span class="o">.</span><span class="n">update_attribute</span><span class="p">(</span><span class="ss">:deleted_at</span><span class="p">,</span> <span class="no">Time</span><span class="o">.</span><span class="n">current</span><span class="p">)</span>
</span><span class='line'>    <span class="kp">false</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  The behavior of MarkDeleted is stateless, so I added the callback as a class method.
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Account</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">before_destroy</span> <span class="no">MarkDeleted</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Invoice</span> <span class="o">&lt;</span> <span class="ss">ActiveRecord</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'>  <span class="n">before_destroy</span> <span class="no">MarkDeleted</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  So far so good, That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/21/ruby-on-rails-currency-formatting/">Ruby on Rails Currency Formatting</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-21T00:30:00+07:00" pubdate data-updated="true">Mar 21<span>st</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/ruby_on_rails.png" width="400" alt="Ruby on Rails Currency Formatting" />
</p>




<p>
  Well, Ruby on Rails framework provide some various ways for formatting currency. Formatting a number as currency is pretty easy thanks to the <code>number_to_currency</code> helper. This helper will take a valid number and format it as currency. It accept a number of different options that allow complete customization of the displayed value:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">number_to_currency</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{})</span>
</span></code></pre></td></tr></table></div></figure>


<table>
<thead>
<tr>
<th>Options </th>
<th> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>:locale </td>
<td> The locale option allows you to specify the locale you wish to use. Defaults to the current locale.</td>
</tr>
<tr>
<td>:precision </td>
<td> Sets the level of precision. Defaults to 2. Precision is the number of decimal places after the decimal.</td>
</tr>
<tr>
<td>:unit </td>
<td> Sets the denomination of the currency. example: $ for the United States.</td>
</tr>
<tr>
<td>:separator </td>
<td> Specifies the separator to use between the units. example the &ldquo;.&rdquo; separates dollars and cents in the US.</td>
</tr>
<tr>
<td>:delimiter </td>
<td> Specifies the separator to use for the thousands delimiter. example: 123,456.</td>
</tr>
<tr>
<td>for </td>
<td> For loop.</td>
</tr>
<tr>
<td>:format </td>
<td> Sets the format for non-negative numbers. The current default is &ldquo;%u%n&rdquo;. The %u specifies the currency (&ldquo;$&rdquo;) and the %n specifies the number (&ldquo;123,456&rdquo;)</td>
</tr>
<tr>
<td>:negative_format </td>
<td> Same as format, but applies to negative numbers.</td>
</tr>
<tr>
<td>:raise </td>
<td> If raise is set to true, an exception will be raised if the number isn&rsquo;t a valid number.</td>
</tr>
</tbody>
</table>


<p>
  <br/>
  Example:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">number_to_currency</span> <span class="mi">123456</span><span class="o">.</span><span class="mi">50</span>                        <span class="c1"># =&gt; $123,456.50</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="mi">123456</span><span class="o">.</span><span class="mi">506</span>                       <span class="c1"># =&gt; $123,456.51</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="mi">123456</span><span class="o">.</span><span class="mi">506</span><span class="p">,</span> <span class="ss">precision</span><span class="p">:</span> <span class="mi">3</span>         <span class="c1"># =&gt; $123,456.506</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="s2">&quot;123a456&quot;</span>                        <span class="c1"># =&gt; $123a456</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="s2">&quot;123a456&quot;</span><span class="p">,</span> <span class="k">raise</span><span class="p">:</span> <span class="kp">true</span>           <span class="c1"># =&gt; ActionView::Helpers::NumberHelper::InvalidNumberError error</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="o">-</span><span class="mi">123456</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span> <span class="ss">:negative_format</span> <span class="o">=&gt;</span> <span class="s2">&quot;(%u%n)&quot;</span>                               <span class="c1"># =&gt; ($123,456.50)</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="mi">123456</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span> <span class="ss">unit</span><span class="p">:</span> <span class="s2">&quot;£&quot;</span><span class="p">,</span> <span class="ss">seperator</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="ss">delimiter</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>                    <span class="c1"># =&gt; £123456.50</span>
</span><span class='line'><span class="n">number_to_currency</span> <span class="mi">123456</span><span class="o">.</span><span class="mi">50</span><span class="p">,</span> <span class="ss">unit</span><span class="p">:</span> <span class="s2">&quot;£&quot;</span><span class="p">,</span> <span class="ss">separator</span><span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="ss">delimiter</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="p">:</span> <span class="s2">&quot;%n %u&quot;</span>   <span class="c1"># =&gt; 123456,50 £</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  So far so good, That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/18/dependency-inversion-principle-in-ruby/">Dependency Inversion Principle in Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-18T23:54:00+07:00" pubdate data-updated="true">Mar 18<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/rights_and_wrongsof_ruby.jpg" width="400" alt="Dependency Inversion Principle in Ruby" />
</p>




<p>
  Simply Dependency Inversion Principle states that: Abstractions should not depend upon details. Details should depend upon abstractions.
</p>




<p>
  Let&#8217;s go back to the first example on the Open/Closed Principle and change it a bit:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Report</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">body</span>
</span><span class='line'>    <span class="n">generate_reporty_stuff</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">print</span>
</span><span class='line'>    <span class="no">JSONFormatter</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">JSONFormatter</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span class='line'>    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  Now there is a formatter class, but I&#8217;ve hardcoded it on the Report class, thus creating a dependency from the Report to the JSONFormatter. Since the Report is a more abstract (high-level) concept than the JSONFormatter, we&#8217;re effectively breaking the DIP.
</p>




<p>
  We can solve it the exact same way with solved it on the Open/Closed Principle problem, with dependency injection:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Report</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">body</span>
</span><span class='line'>    <span class="n">generate_reporty_stuff</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="ss">formatter</span><span class="p">:</span> <span class="no">JSONFormatter</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>
</span><span class='line'>    <span class="n">formatter</span><span class="o">.</span><span class="n">format</span> <span class="n">body</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  So far so good, this way the Report does not depend on the JSONFormatter and can use any type of formatter that has a method called format (this is known as duck typing). That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/18/interface-segregation-principle-in-ruby/">Interface Segregation Principle in Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-18T23:41:00+07:00" pubdate data-updated="true">Mar 18<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/rights_and_wrongsof_ruby.jpg" width="400" alt="Interface Segregation Principle" />
</p>




<p>
  Simply Interface Segregation Principle states that: When a client depends upon a class that contains interfaces that the client does not use, but that other clients do use, then that client will be affected by the changes that those other clients force upon the class.
</p>




<p>
  If you have a class that has two clients (objects using it):
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Car</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">open</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">start_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">change_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Driver</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">drive</span>
</span><span class='line'>    <span class="vi">@car</span><span class="o">.</span><span class="n">open</span>
</span><span class='line'>    <span class="vi">@car</span><span class="o">.</span><span class="n">start_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Mechanic</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">do_stuff</span>
</span><span class='line'>    <span class="vi">@car</span><span class="o">.</span><span class="n">change_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  As you can see, our Car class has an interface that&#8217;s used partially by both the Driver and the Mechanic. We can improve our interface like this:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Car</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">open</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">start_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">CarInternals</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">change_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Driver</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">drive</span>
</span><span class='line'>    <span class="vi">@car</span><span class="o">.</span><span class="n">open</span>
</span><span class='line'>    <span class="vi">@car</span><span class="o">.</span><span class="n">start_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Mechanic</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">do_stuff</span>
</span><span class='line'>    <span class="vi">@car_internals</span><span class="o">.</span><span class="n">change_engine</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  So far so good, splitting the interface into two, we can comply to the Interface Segregation Principle. That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/18/liskov-substitution-principle-in-ruby/">Liskov Substitution Principle in Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-18T23:00:00+07:00" pubdate data-updated="true">Mar 18<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>
  <img src="/images/rights_and_wrongsof_ruby.jpg" width="400" alt="Liskov Substitution Principle in Ruby" />
</p>




<p>
  Assume that we already had the code:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Animal</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">walk</span>
</span><span class='line'>     <span class="n">do_some_walkin</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Cat</span> <span class="o">&lt;</span> <span class="no">Animal</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">run</span>
</span><span class='line'>    <span class="n">run_like_a_cat</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  This principle applies only to inheritance. In order to comply with the Liskov Substitution Principle, Subtypes must be substitutable for their base types.
</p>




<p>
  Well, so they must have the same interface. Since ruby does not have abstract methods, we can do it like this:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Animal</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">walk</span>
</span><span class='line'>    <span class="n">do_some_walkin</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">run</span>
</span><span class='line'>    <span class="k">raise</span> <span class="no">NotImplementedError</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Cat</span> <span class="o">&lt;</span> <span class="no">Animal</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">run</span>
</span><span class='line'>    <span class="n">run_like_a_cat</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  So far so good, That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/17/open-slash-closed-principle-in-ruby/">Open/Closed Principle in Ruby</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-17T22:32:00+07:00" pubdate data-updated="true">Mar 17<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/rights_and_wrongsof_ruby.jpg" width="400" alt="Open/Closed Principle in Ruby" /></p>

<p>
  Assume that we already had the code:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Report</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">body</span>
</span><span class='line'>    <span class="n">generate_reporty_stuff</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">print</span>
</span><span class='line'>    <span class="n">body</span><span class="o">.</span><span class="n">to_json</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  The code above violates Open/Closed Principle as if we want to change the format the report gets printed, we need to change the code of the class. Let make it be better then:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Report</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">body</span>
</span><span class='line'>    <span class="n">generate_reporty_stuff</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="ss">formatter</span><span class="p">:</span> <span class="no">JSONFormatter</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>
</span><span class='line'>    <span class="n">formatter</span><span class="o">.</span><span class="n">format</span> <span class="n">body</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  This way changing the formatter is as easy as:
</p>




<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">report</span> <span class="o">=</span> <span class="no">Report</span><span class="o">.</span><span class="n">new</span>
</span><span class='line'><span class="n">report</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="ss">formatter</span><span class="p">:</span> <span class="no">XMLFormatter</span><span class="o">.</span><span class="n">new</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<p>
  So far so good, I have extended the functionality without modifying the code. In this example, I have used a technique called &#8220;Dependency Injection&#8221;. That&#8217;s it!!! See ya!!! :)
</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Like To News Article</h1>
  <ul>
    <li>
      <div class="fb-page" data-href="https://www.facebook.com/geekhmer" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true" data-show-posts="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/geekhmer"><a href="https://www.facebook.com/geekhmer">GeeKhmer</a></blockquote></div></div>
    </li>
  </ul>
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/11/19/reactjs-refs/">ReactJS Refs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/18/reactjs-ownership/">ReactJS Ownership</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/14/reactjs-state/">ReactJS State</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/14/reactjs-proptypes/">ReactJS PropTypes</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/07/reactjs-jsx/">ReactJS JSX</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/06/reactjs-getting-start-with-hello-world/">ReactJS Getting Start With Hello World</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/30/reactjs-concepts-and-getting-start/">ReactJS Concepts and Getting Start</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Category</h1>
  <ul id="recent_posts">
    
      <li>
        <a href="/blog/categories/facebook/">Facebook [ 4 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/ruby/">Ruby [ 105 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/heroku/">Heroku [ 2 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/ruby-on-rails/">Ruby on rails [ 95 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/testing/">Testing [ 5 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/layout/">Layout [ 3 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/ruby-metaprogramming/">Ruby metaprogramming [ 4 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/websocket/">Websocket [ 2 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/front-end-mvc-framework/">Front-end mvc framework [ 1 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/javascript/">Javascript [ 15 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/erlang/">Erlang [ 20 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/design-pattern/">Design pattern [ 1 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/other/">Other [ 27 ]</a>
      </li>
    
      <li>
        <a href="/blog/categories/reactjs/">Reactjs [ 8 ]</a>
      </li>
    
  </ul>
</section><section>
  <h1>Notes</h1>
  <ul id="recent_posts">
    <li>
      <a href="http://vimcommands.github.io/" target="_blank">Vim Commands</a>
    </li>
    <li>
      <a href="http://ruby-hacking-style-guide.github.io/" target="_blank">Ruby Hacking Style Guide</a>
    </li>
  </ul>
</section><section>
  <h1>References</h1>
  <ul id="recent_posts">
    <li>
      <a href="http://www.erlang.org/" target="_blank">
        <img src="/images/logo_erlang.png" />
      </a>
    </li>
    <li>
      <a href="http://www.chicagoboss.org/" target="_blank">
        <img src="/images/logo_chicagoboss.svg" />
      </a>
    </li>
    <li>
      <a href="https://www.ruby-lang.org/en/" target="_blank">
        <img src="/images/logo_ruby.png" />
      </a>
    </li>
    <li>
      <a href="http://guides.rubyonrails.org" target="_blank">
        <img src="/images/logo_rails_guides.png" />
      </a>
    </li>
    <li>
      <a href="http://railscasts.com" target="_blank">
        <img src="/images/logo_rails_casts.png" />
      </a>
    </li>
    <li>
      <a href="https://github.com" target="_blank">
        <img src="/images/logo_github.png" />
      </a>
    </li>
    <li>
      <a href="https://www.linode.com" target="_blank">
        <img src="/images/logo_linode.png" />
      </a>
    </li>
    <li>
      <a href="http://newrelic.com" target="_blank">
        <img src="/images/logo_newrelic.png" />
      </a>
    </li>
    <li>
      <a href="https://developers.facebook.com/" target="_blank">
        <img src="/images/logo_facebook.png" />
      </a>
    </li>
  </ul>
</section>




  
</aside>
    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 GeeKhmer in Phnom Penh, Cambodia.
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=1451301955117043&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
