<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Other | GeeKhmer]]></title>
  <link href="http://geekhmer.github.io/blog/categories/other/atom.xml" rel="self"/>
  <link href="http://geekhmer.github.io/"/>
  <updated>2017-05-22T00:14:17+07:00</updated>
  <id>http://geekhmer.github.io/</id>
  <author>
    <name><![CDATA[Bunlong Van]]></name>
    <email><![CDATA[bunlong.van@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Installation and Configuration Nginx as Reverse Proxy for Apache on Ubuntu Server]]></title>
    <link href="http://geekhmer.github.io/blog/2017/04/26/installation-and-configuration-nginx-as-reverse-proxy-for-apache-on-ubuntu-server/"/>
    <updated>2017-04-26T16:11:00+07:00</updated>
    <id>http://geekhmer.github.io/blog/2017/04/26/installation-and-configuration-nginx-as-reverse-proxy-for-apache-on-ubuntu-server</id>
    <content type="html"><![CDATA[<p>
  <img src="http://geekhmer.github.io/images/nginx_apache.jpg" width="600" alt="Installation and Configuration Nginx as Reverse Proxy for Apache on Ubuntu Server" />
</p>




<p>
  In this article, I will show you how to install and configure Nginx as a caching reverse proxy for an Apache web server on Ubuntu, Nginx is used as the front-end and Apache as the back-end. 
</p>




<p>
  Nginx will run on port 80 to respond to requests from user/browser, the request will be forwarded to the Apache server that is running on port 7070.
</p>




<p>
  <h3>Apache</h3>
</p>




<p>
  <strong>Install Apache & PHP</strong><br/>
  Log into your ubuntu server with SSH and switch to root user by running:
</p>


<p>{% codeblock lang:ruby %}
sudo su
{% endcodeblock %}</p>

<p>
  Then install apache with the apt-get command:
</p>


<p>{% codeblock lang:ruby %}
apt-get install apache2
{% endcodeblock %}</p>

<p>
  Once apache is installed, we must install PHP as apache module for this tutorial:
</p>


<p>{% codeblock lang:ruby %}
apt-get install php5 php5-mysql libapache2-mod-php5
{% endcodeblock %}</p>

<p>
  <strong>Configure Apache and PHP</strong><br/>
  By default, apache listens on port 80. We have to configure apache to run on port 7070 for our proxy setup as port 80 will be used by nginx later.
</p>




<p>
  If you want to change the port for apache web server, you must edit the apache configuration file <code>/etc/apache2/ports.conf</code>, and then proceed with the virtual host configuration in the <code>/etc/apache2/sites-available/</code> directory.
</p>




<p>
  First change the Apache port to 7070 by editing the file <code>ports.conf</code> with the vim editor:
</p>


<p>{% codeblock lang:ruby %}
vim /etc/apache2/ports.conf
{% endcodeblock %}</p>

<p>
  And then change port 80 to 7070:
</p>


<p>{% codeblock ports.conf lang:ruby %}
Listen 7070
{% endcodeblock %}</p>

<p>
  And then save and exit.
</p>




<p>
  And now go to the virtualhost directory and edit the file <code>000-default.conf</code>:
</p>


<p>{% codeblock lang:ruby %}
vim /etc/apache2/sites-available/000-default.conf
{% endcodeblock %}</p>

<p>
  And then make sure your configuration is same as below:
</p>


<p>{% codeblock 000-default.conf lang:ruby %}
<VirtualHost *:7070>
  ServerName www.reverse.com
  ServerAlias reverse.com</p>

<p>  ServerAdmin webmaster@localhost
  DocumentRoot /var/www/html/geekhmer-dev</p>

<p>  <Directory "/var/www/html/geekhmer-dev"></p>

<pre><code>RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</code></pre>

<p>  </Directory></p>

<p>  ErrorLog ${APACHE_LOG_DIR}/geekhmer-dev_error.log
  CustomLog ${APACHE_LOG_DIR}/geekhmer-dev_access.log combined
</VirtualHost>
{% endcodeblock %}</p>

<p>
  And then save and exit.
</p>




<p>
  Next test the configuration and restart apache:
</p>


<p>{% codeblock lang:ruby %}
apachectl configtest</p>

<p>systemctl restart apache2
{% endcodeblock %}</p>

<p>
  Then we verify that the apache and php is working by creating a new file with the name <code>info.php</code> in the directory <code>/var/www/html/</code>.

</p>


<p>{% codeblock lang:ruby %}
echo &ldquo;&lt;?php phpinfo(); ?>&rdquo; > /var/www/html/info.php
{% endcodeblock %}</p>

<p>
  Visit your site www.reverse.com:7070/info.php.
</p>




<p>
  <h3>Nginx</h3>
</p>




<p>
  <strong>Install Nginx</strong><br/>
  Let install Nginx with the following apt-get command:
</p>


<p>{% codeblock lang:ruby %}
apt-get install nginx
{% endcodeblock %}</p>

<p>
  <strong>Configure Nginx</strong><br/>
  Once Nginx is installed, configure Nginx to act as reverse proxy for the apache web server that running on port 7070.
</p>




<p>
  Go to the nginx configuration directory and edit the file <code>nginx.conf</code>:
</p>


<p>{% codeblock lang:ruby %}
vim /etc/nginx/nginx.conf
{% endcodeblock %}</p>

<p>
  And then enable Gzip compression for Nginx by uncomment the gzip lines below:
</p>


<p>{% codeblock nginx.conf lang:ruby %}</p>

<h1>#</h1>

<h1>Gzip Settings</h1>

<h1>#</h1>

<p>gzip on;
gzip_disable &ldquo;msie6&rdquo;;</p>

<p>gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_buffers 16 8k;
gzip_http_version 1.1;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/    javascript;
{% endcodeblock %}</p>

<p>
  The most important is:<br/>
  - gzip on : to turn gzip compression.<br/>
  - gzip_types : is list of MIME-types which you want to turn the compression.<br/>
  - gzip_proxied any : is enable compression for proxied request.
</p>




<p>
  Under gzip settings, add these proxy cache settings:
</p>


<p>{% codeblock nginx.conf lang:ruby %}</p>

<h1>#</h1>

<h1>Proxy Cache Settings</h1>

<h1>#</h1>

<p>proxy_cache_path /var/cache levels=1:2 keys_zone=reverse_cache:60m inactive=90m max_size=1000m;
{% endcodeblock %}</p>

<p>
  The important is:<br/>
  - The directory for the proxy cache is /var/cache.<br/>
  - levels : is a directive that tells Nginx how the cache is saved in file system.
<br/>
  - key_zone : is just a name of the cache zone, you can choose it freely, but don't add special chars or whitespace in the name. I will use the name "reverse_cache" here.
</p>




<p>
  And then save and exit.
</p>




<p>
  And then we will configure proxy params in <code>/etc/nginx/proxy_params</code> file for using in virtualhost later.
</p>


<p>{% codeblock lang:ruby %}
vim /etc/nginx/proxy_params
{% endcodeblock %}</p>

<p>
  Paste the configuration below:
</p>


<p>{% codeblock proxy_params lang:ruby %}
proxy_set_header X-Real-IP $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $http_host;
proxy_set_header X-Forwarded-Proto $scheme;
proxy_set_header X-Forwarded-Host $host;</p>

<h1>#</h1>

<h1>Cache configuration</h1>

<h1>#</h1>

<p>proxy_cache reverse_cache;
proxy_cache_valid 3s;
proxy_no_cache $cookie_PHPSESSID;
proxy_cache_bypass $cookie_PHPSESSID;
proxy_cache_key &ldquo;$scheme$host$request_uri&rdquo;;
add_header X-Cache $upstream_cache_status;
{% endcodeblock %}</p>

<p>
  And then save and exit.
</p>




<p>
  Now we will configure a virtualhost in the directory <code>/etc/nginx/sites-available</code>.  And I will create a new virtualhost configuration file named <code>reverse.conf</code>. Just got to the directory and create new file with vim:
</p>


<p>{% codeblock lang:ruby %}
vim /etc/nginx/sites-available/reverse.conf
{% endcodeblock %}</p>

<p>
  Paste the configuration below:
</p>


<p>{% codeblock reverse.conf lang:ruby %}
server {
  listen 80;</p>

<p>  # Site Directory same in the apache virtualhost configuration
  root /var/www/html/geekhmer_dev;
  index index.php index.html index.htm;</p>

<p>  # Domain
  server_name www.reverse.com reverse.com;</p>

<p>  location / {</p>

<pre><code>try_files $uri @proxy;
</code></pre>

<p>  }</p>

<p>  location @proxy {</p>

<pre><code>proxy_pass http://127.0.0.1:7070;
include /etc/nginx/proxy_params;
</code></pre>

<p>  }</p>

<p>  location ~* .php$ {</p>

<pre><code>proxy_pass http://127.0.0.1:7070;
include /etc/nginx/proxy_params;
</code></pre>

<p>  }</p>

<p>  # Enable Cache the file 30 days
  location ~* .(jpg|png|gif|jpeg|css|mp3|wav|swf|mov|doc|pdf|xls|ppt|docx|pptx|xlsx|css|js)$ {</p>

<pre><code>proxy_cache_valid 200 120m;
# expires max;
expires 30d;
proxy_cache reverse_cache;
access_log off;
</code></pre>

<p>  }</p>

<p>  # Disable Cache for the file type html, json
  location ~* .(?:manifest|appcache|html?|xml|json)$ {</p>

<pre><code>expires -1;
</code></pre>

<p>  }</p>

<p>  location ~ /.ht {</p>

<pre><code>deny all;
</code></pre>

<p>  }
}
{% endcodeblock %}</p>

<p>
  And then save and exit.
</p>




<p>
  And then activate the new virtualhost configuration:
</p>


<p>{% codeblock lang:ruby %}
ln -s /etc/nginx/sites-available/reverse.conf /etc/nginx/sites-enabled/
{% endcodeblock %}</p>

<p>
  And then we will test the nginx configuration and restart nginx:
</p>


<p>{% codeblock lang:ruby %}
nginx -t</p>

<p>systemctl restart nginx
{% endcodeblock %}</p>

<p>
  Nginx is configured as reverse proxy now. You can test it with curl:
</p>


<p>{% codeblock lang:ruby %}
curl -I www.reverse.com</p>

<p>curl -I www.reverse.com/info.php
{% endcodeblock %}</p>

<p>
  <h3>Configure Logging</h3>
</p>




<p>
  I will configure apache to log the real ip of the visitor instead of the local IP.
</p>




<p>
  Let go to install the apache module <code>libapache2-mod-rpaf</code> and edit the module configuration file:
</p>


<p>{% codeblock lang:ruby %}
apt-get install libapache2-mod-rpaf</p>

<p>vim /etc/apache2/mods-available/rpaf.conf
{% endcodeblock %}</p>

<p>
  Add the server IP to the line 10. My server IP is: 192.168.1.117.
</p>


<p>{% codeblock rpaf.conf lang:ruby %}
RPAFproxy_ips 127.0.0.1 192.168.1.117 ::1
{% endcodeblock %}</p>

<p>
  And then save and exit.
</p>




<p>
  And then restart apache:
</p>


<p>{% codeblock lang:ruby %}
systemctl restart apache2
{% endcodeblock %}</p>

<p>
  Test rpaf by viewing the apache access log with the tail command:
</p>


<p>{% codeblock lang:ruby %}
tail -f /var/log/apache2/geekhmer-dev_access.log
{% endcodeblock %}</p>

<p>
  Nginx is installed as reverse proxy in front of the Apache web server. If a visitor requests a php file, the request will be passed to apache on port 7070, and you can see the real IP visitor on the apache log file.
</p>




<p>
  <h3>Conclusion</h3>
</p>




<p>
  Nginx is fast and popular web server with low memory usage that can act as web server and reverse proxy for HTTP and HTTPS protocol. Nginx reverse proxy for apache is a setup that uses Nginx as front-end, and apache as back-end. Nginx handles the incoming request from the browser and passes it to the apache back-end. In this article, we have setup a configuration for nginx as http cache that caches PHP file requests and images.
</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why Is Website Maintenance Important?]]></title>
    <link href="http://geekhmer.github.io/blog/2017/03/27/why-is-website-maintenance-important/"/>
    <updated>2017-03-27T00:53:00+07:00</updated>
    <id>http://geekhmer.github.io/blog/2017/03/27/why-is-website-maintenance-important</id>
    <content type="html"><![CDATA[<p>
  <img src="http://geekhmer.github.io/images/website_maintenance_important.png" width="600" alt="Why Is Website Maintenance Important?" />
</p>




<p>
  I saw it many times a company has a website delivered, with no changes, no additions, no fresh content and most important of all is no security updates. The website stays as it was delivered, sometimes for many years.
</p>




<p>
  You truly ask yourself: "If I like the design and the website just works, why would I need to be maintained?". Please go through with me and read on to learn why maintenance is very important:
</p>




<p>
  <strong>SECURITY</strong><br/>
  Probably the most important thing is: keep your site safe! Website software (Content Management Systems, plug-ins and other add-ons to the website’s functionality) are constantly updated. Partly to improve how it works or to add something new and handy, but often also to patch security holes.
</p>




<p>
  Hackers are constantly looking for outdated websites or software (and known security holes). If you don’t keep up with the latest version of the software, your website could be at risk.
</p>




<p>
  <strong>ATTRACTIVENESS</strong><br/>
  A website that is regularly updated with fresh content (blog posts, news articles, promotions, new products, etc.) attracts more visitors. And isn’t that what you want to achieve with your website: attracting visitors? Visitors get a bad impression if there is old data on your website.
</p>




<p>
  Regularly create the new content, text, or images that relate to your business to attract both new and returning visits.
</p>




<p>
  <strong>GOOGLE RANKING</strong><br/>
  Google loves websites that are regularly updated. Keeping your products and services up-to-date shows search engines that your site is fresh. A site with copyright on the bottom and the "Latest News" article years out of date will not be as attractive to Google in terms of quality or usefulness. When new content is added on a regular basis, Google values this and takes that into account with the overall ranking of your website.
</p>




<p>
  Google itself provides a useful tool called "Webmaster Tools" which essentially checks the 'health' of your website.
</p>




<p>
  <strong>YOUR CORPORATE IMAGE</strong><br/>
  Your website is an interface into your business and it can have a big impact on how visitors value your products or services. Your website should be kept relevant by regularly refreshing content. Also regularly check that contact forms work, addresses and phone numbers are updated and products, services and price lists are current and correct. This means visitors find what they are looking for quickly and easily, and are more likely to become customers.
</p>




<p>
  <strong>Can you do maintenance yourself?</strong><br/>
  Of course you can. The websites with Content Management Systems (like WordPress) that make it very easy to add or update content yourself. However, ask yourself: will you really do that? Will you really dedicate time every week or month to update your website’s content? And maintain those regular updates year after year? Or do you rather concentrate on your business instead of maintaining your website?
</p>




<p>
  Additionally there is one thing that's not easy for non-technical people to do software updates. An update to your website’s software can easily break your website. Because (part of) a software is not compatible with another application.
</p>




<p>
  So far so good, let technical people do website maintenance for your business to professionals.
</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Online Payment Gateway in Cambodia]]></title>
    <link href="http://geekhmer.github.io/blog/2017/03/24/online-payment-gateway-in-cambodia/"/>
    <updated>2017-03-24T17:19:00+07:00</updated>
    <id>http://geekhmer.github.io/blog/2017/03/24/online-payment-gateway-in-cambodia</id>
    <content type="html"><![CDATA[<p>
  <img src="http://geekhmer.github.io/images/payment_gateway.png" width="600" alt="Online Payment Gateway in Cambodia" />
</p>




<p>
  The amount of shops in Cambodia wanna sell product and service online is growing. But you truly don't know which Online Payment Gateway you consider to choose for implement and do integration right? 
</p>




<p>
  The good news is here, take it easy I will do a presentaion for you, let go through with me:
</p>




<p>
  <strong>PayPal</strong><br/>
  <a href="https://www.paypal.com" target="_blank">PayPal</a> is by far the easiest method to receive online payments made by credit card or via PayPal itself. However, the company has <a href="https://www.paypal.com/kh/cgi-bin/webscr?cmd=_display-xborder-fees-outside&countries=" target="_blank">no relations with any bank in Cambodia.</a>
</p>




<p>
  So it's not possible right? Well, the only possibility is to have a bank account in another country linked to your PayPal account.
</p>




<p>
  <strong>Cathay United Bank</strong><br/>
  <a href="http://www.cathaybk.com.kh/index.php?view=bzspgwy" target="_blank">Cathay United Bank (formerly SBC Bank)</a> in Cambodia offers an online payment gateway, which is rather easy to implement.
</p>




<p>
  Of course, you need an account with the bank and Cathay United charges a percentage fee for this service. It only can handle credit cards of MasterCard, JCB and VISA, which is a bit limited.
</p>




<p>
  <strong>ACLEDA Bank</strong><br/>
  As a well respected bank, ACLEDA is a bit late to the party, only announcing recently their <a href="http://www.acledabank.com.kh/kh/eng/ps_ebecommerce_migs" target="_blank">E-Commerce Payment Gateway</a>.
</p>




<p>
  ACLEDA uses the same MasterCard Internet Gateway Service (MiGS) as Cathay United Bank, so this is just as easy to set up on your website.
</p>




<p>
  <strong>WING</strong><br/>
  WING is primarily a phone-to-phone payment service and very popular among Cambodians. They can send and receive money nationwide, the company has a large network of agents and also offers a solution for <a href="https://www.wingmoney.com/online-payment/" target="_blank">online payments</a>. The only thing you have to do is open a free business account. Once that’s done you’ll get instructions on how to implement it on your website to receive online payments in your Wing account. This service is only available for customers within Cambodia.
</p>




<p>
  <strong>PayGo</strong><br/>
  <a href="https://www.paygo24.com/" target="_blank">PayGo</a> is a service provided by ABA Bank. To use the service, customers first have to sign up using a mobile phone number. This only works for Cambodian phone numbers, so not suitable for international customers. Although it is convenient for customers in Cambodia, we have some doubts about the security of this system. Only using a phone number as a check seems not very secure.
</p>




<p>
  My suggestion for you is that:<br/>
</p>




<p>
  Due PayPal not yet entered in Cambodian market, the services offered by Cathay United Bank and ACLEDA Bank seem the most robust, secure and comparatively easy to implement.
</p>




<p>
  And if you only or primarily target customers within Cambodia, WING and PayGo can be an alternative.
</p>




<p>
  So far so good, That's it!!! See ya!!! :)
</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[HTTP Status Code and Symbols]]></title>
    <link href="http://geekhmer.github.io/blog/2017/03/16/http-status-code-and-symbols/"/>
    <updated>2017-03-16T21:36:00+07:00</updated>
    <id>http://geekhmer.github.io/blog/2017/03/16/http-status-code-and-symbols</id>
    <content type="html"><![CDATA[<p>
  <img src="http://geekhmer.github.io/images/list_http.jpg" width="600" alt="HTTP Status Code and Symbols" />
</p>




<p>
  Thanks to Cody Fauser for this list of HTTP responce codes and their Ruby on Rails or other Framework symbol mappings. Let go through the status code symbol below:
</p>




<p>
  <strong>1xx Informational</strong><br/>
  100 :continue<br/>
  101 :switching_protocols<br/>
  102 :processing
</p>




<p>
  <strong>2xx Success</strong><br/>
  200 :ok<br/>
  201 :created<br/>
  202 :accepted<br/>
  203 :non_authoritative_information<br/>
  204 :no_content<br/>
  205 :reset_content<br/>
  206 :partial_content<br/>
  207 :multi_status<br/>
  226 :im_used
</p>




<p>
  <strong>3xx Redirection</strong><br/>
  300 :multiple_choices<br/>
  301 :moved_permanently<br/>
  302 :found<br/>
  303 :see_other<br/>
  304 :not_modified<br/>
  305 :use_proxy<br/>
  307 :temporary_redirect
</p>




<p>
  <strong>4xx Client Error</strong><br/>
  400 :bad_request<br/>
  401 :unauthorized<br/>
  402 :payment_required<br/>
  403 :forbidden<br/>
  404 :not_found<br/>
  405 :method_not_allowed<br/>
  406 :not_acceptable<br/>
  407 :proxy_authentication_required<br/>
  408 :request_timeout<br/>
  409 :conflict<br/>
  410 :gone<br/>
  411 :length_required<br/>
  412 :precondition_failed<br/>
  413 :request_entity_too_large<br/>
  414 :request_uri_too_long<br/>
  415 :unsupported_media_type<br/>
  416 :requested_range_not_satisfiable<br/>
  417 :expectation_failed<br/>
  422 :unprocessable_entity<br/>
  423 :locked<br/>
  424 :failed_dependency<br/>
  426 :upgrade_required
</p>




<p>
  <strong>5xx Server Error</strong><br/>
  500 :internal_server_error<br/>
  501 :not_implemented<br/>
  502 :bad_gateway<br/>
  503 :service_unavailable<br/>
  504 :gateway_timeout<br/>
  505 :http_version_not_supported<br/>
  507 :insufficient_storage<br/>
  510 :not_extended
</p>




<p>
  So far so good, That's it!!! See ya!!! :)
</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why I do combining apache and nginx together?]]></title>
    <link href="http://geekhmer.github.io/blog/2017/03/13/why-i-do-combining-apache-and-nginx-together/"/>
    <updated>2017-03-13T10:08:00+07:00</updated>
    <id>http://geekhmer.github.io/blog/2017/03/13/why-i-do-combining-apache-and-nginx-together</id>
    <content type="html"><![CDATA[<p>
  <img src="http://geekhmer.github.io/images/nginx_apache.jpg" width="600" alt="Why I do combining apache and nginx together?" />
</p>




<p>
  Nginx and apache are powerful and effective servers by nowadays. Apache currently reigns as the number 1 server for websites and since its public release in 2006. And nginx has taken the world by storm and is now the number 2 server for active sites. 
</p>




<h3>The Reason Why I Use Nginx and Apache Together is</h3>




<p>
  <strong>Nginx</strong><br/>
  - nginx serves static files (images, css, html etc.) really fast and efficient and passes php and .htaccess requests to apache for processing.<br/>
  - nginx needs the help of php-fpm or similar modules for dynamic content.
</p>




<p>
  <strong>Apache</strong><br/>
  - apache is hard on server memory.<br/>
  - apache serves php and .htaccess (most cms site like wordpress needs it for rewrite) and if you throw in a php opcode cache like zend opcache or xcache it should serve php even faster.
</p>




<p>
  <strong>nginx + apache with php opcache = performance and server resource efficiency</strong>
</p>




<p>
  So far so good, in the next article I will show you the configurations. That's it!!! See ya!!! :)
</p>

]]></content>
  </entry>
  
</feed>
